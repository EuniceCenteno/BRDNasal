srun -N 1 --tasks-per-node=8 -t 10:00:00 -A microbiome -I --pty /bin/bashGetting set upYou will need the necessary modules to run qiimemodule load bioinfomodule load mothurmothur  make.file(inputdir=., type=gz, prefix=BRD.stability)CHANGe the first row to (use “Tab” to separate it)sample-id   forward-absolute-filepath       reverse-absolute-filepathTo look at the MANIFESTfilemodule load Qiime/2-2020.2module listqiime tools import \--type 'SampleData[PairedEndSequencesWithQuality]' \--input-path BRD_onlysamples.stability.files \--input-format PairedEndFastqManifestPhred33V2 \--output-path ./Qiime_new/demux-paired-end.qzaqiime demux summarize \  --i-data ./Qiime_new/demux-paired-end.qza \  --o-visualization ./Qiime_new/demux-paired-end.qzvDenoising stepTotal features:340073Total sequences 15287698Samples: 133qiime dada2 denoise-paired \  --i-demultiplexed-seqs ./Qiime_new/demux-paired-end.qza \  --p-trim-left-f 0 \  --p-trim-left-r 0 \  --p-trunc-len-f 251 \  --p-trunc-len-r 223 \  --o-table ./Qiime_new/table.qza \  --o-representative-sequences ./Qiime_new/rep-seqs.qza \  --o-denoising-stats ./Qiime_new/denoising-stats.qzaFeatureTable and FeatureData summariesqiime feature-table summarize \  --i-table ./Qiime_new/table.qza \  --o-visualization ./Qiime_new/table.qzv \  --m-sample-metadata-file BRD.samplesQiime.txt qiime feature-table tabulate-seqs \  --i-data ./Qiime_new/rep-seqs.qza \  --o-visualization ./Qiime_new/rep-seqs.qzv qiime metadata tabulate \  --m-input-file ./Qiime_new/denoising-stats.qza \  --o-visualization ./Qiime_new/denoising-stats.qzv## After deinoising18,065 features13,127,373 sequencesSamples 132Generating the phylogenetic treeqiime phylogeny align-to-tree-mafft-fasttree \  --i-sequences ./Qiime_new/rep-seqs.qza \  --o-alignment ./Qiime_new/aligned-rep-seqs.qza \  --o-masked-alignment ./Qiime_new/masked-aligned-rep-seqs.qza \  --o-tree ./Qiime_new/unrooted-tree.qza \  --o-rooted-tree ./Qiime_new/rooted-tree.qza qiime diversity alpha-rarefaction \  --i-table ./Qiime_new/table.qza \  --i-phylogeny ./Qiime_new/rooted-tree.qza \  --p-max-depth 35119 \  --m-metadata-file BRD.samplesQiime.txt   \  --o-visualization ./Qiime_new/alpha-rarefaction-35119.qzvqiime diversity alpha-rarefaction \  --i-table ./Qiime_new/table.qza \  --i-phylogeny ./Qiime_new/rooted-tree.qza \  --p-max-depth 40420 \  --m-metadata-file BRD.samplesQiime.txt   \  --o-visualization ./Qiime_new/alpha-rarefaction-40420.qzvIf I rarefied at 40420, I loose Dairy7035119Dairy7110650Dairy1059227Dairy914038Dairy212717Dairy692255Dairy890qiime diversity core-metrics-phylogenetic \  --i-phylogeny ./Qiime_new/rooted-tree.qza \  --i-table ./Qiime_new/table.qza \  --p-sampling-depth 40420 \  --m-metadata-file BRD.samplesQiime.txt \  --output-dir ./Qiime_new/core-metrics-resultsTaxonomic analysisqiime feature-classifier classify-sklearn \  --i-classifier silva-132-99-515-806-nb-classifier.qza \  --i-reads ./Qiime_new/rep-seqs.qza \  --o-classification ./Qiime_new/taxonomy.qzaqiime metadata tabulate \  --m-input-file ./Qiime_new/taxonomy.qza \  --o-visualization ./Qiime_new/taxonomy.qzvqiime taxa barplot \  --i-table ./Qiime_new/table.qza \  --i-taxonomy ./Qiime_new/taxonomy.qza \  --m-metadata-file BRD.samplesQiime.txt \  --o-visualization ./Qiime_new/taxa-bar-plots.qzv## Export the documents from the cluster to the computerqiime tools export --input-path ./Qiime_new/taxonomy.qza --output-path ./Qiime_new/core-metrics-results/exported/You are in core-metric-results-2 directory qiime tools export --input-path ./rarefied_table.qza --output-path exported/qiime tools export --input-path ./faith_pd_vector.qza --output-path exported/mv exported/alpha-diversity.tsv exported/faith_pd.tsvqiime tools export --input-path ./shannon_vector.qza --output-path exported/mv exported/alpha-diversity.tsv exported/shannon.tsvqiime tools export --input-path ./observed_otus_vector.qza --output-path exported/mv exported/alpha-diversity.tsv exported/observed_otus.tsvls exportedqiime tools export --input-path ./evenness_vector.qza --output-path exported/mv exported/alpha-diversity.tsv exported/evenness.tsvbiom convert -i exported/feature-table.biom -o exported/rarified-table.tsv --to-tsvExport beta diversity, you have to move to the OnlySamples directoryqiime tools export \  --input-path ./Qiime_new/core-metrics-results/unweighted_unifrac_pcoa_results.qza \  --output-path ./Qiime_new/core-metrics-results/exported-unweighted_unifracmv ./Qiime_new/core-metrics-results/exported-unweighted_unifrac/ordination.txt ./Qiime_new/core-metrics-results/exported-unweighted_unifrac/ordination_unweighted.txtqiime tools export \  --input-path ./Qiime_new/core-metrics-results/bray_curtis_pcoa_results.qza \  --output-path ./Qiime_new/core-metrics-results/exported-bray_curtismv ./Qiime_new/core-metrics-results/exported-bray_curtis/ordination.txt ./Qiime_new/core-metrics-results/exported-bray_curtis/ordination_braycurtis.txtqiime tools export \  --input-path ./Qiime_new/core-metrics-results/weighted_unifrac_pcoa_results.qza \  --output-path ./Qiime_new/core-metrics-results/exported-weighted_unifracmv ./Qiime_new/core-metrics-results/exported-weighted_unifrac/ordination.txt ./Qiime_new/core-metrics-results/exported-weighted_unifrac/ordination_weighted.txtqiime tools export \  --input-path ./Qiime_new/core-metrics-results/weighted_unifrac_distance_matrix.qza \  --output-path ./Qiime_new/core-metrics-results/exported-weighted_distancemv ./Qiime_new/core-metrics-results/exported-weighted_distance/distance-matrix.tsv ./Qiime_new/core-metrics-results/exported-weighted_distance/weighted-distance-matrix.tsv#### Removing Pseudoalteromonas and Vibrio from the data### Revoming the Pseudoalteromonas from the samplesqiime taxa filter-table \     --i-table ./Qiime_new/table.qza \     --i-taxonomy ./Qiime_new/taxonomy.qza \     --p-mode exact \     --p-exclude "D_0__Bacteria;D_1__Proteobacteria;D_2__Gammaproteobacteria;D_3__Alteromonadales;D_4__Pseudoalteromonadaceae;D_5__Pseudoalteromonas" \     --o-filtered-table ./Qiime_new/table-no-pseudo.qza#removing Vibrioqiime taxa filter-table \     --i-table ./Qiime_new/table-no-pseudo.qza \     --i-taxonomy ./Qiime_new/taxonomy.qza \     --p-mode exact \     --p-exclude "D_0__Bacteria;D_1__Proteobacteria;D_2__Gammaproteobacteria;D_3__Vibrionales;D_4__Vibrionaceae;D_5__Vibrio" \     --o-filtered-table ./Qiime_new/table-filtered.qzaqiime taxa filter-table \     --i-table ./Qiime_new/table-filtered.qza\     --i-taxonomy ./Qiime_new/taxonomy.qza \     --p-mode exact \     --p-exclude "D_0__Bacteria;D_1__Proteobacteria;D_2__Gammaproteobacteria;D_3__Vibrionales;D_4__Vibrionaceae;D_5__Vibrio;D_6__Vibrio sp. RCB484" \     --o-filtered-table ./Qiime_new/table-filtered2.qzaqiime taxa filter-table \     --i-table ./Qiime_new/table-filtered2.qza\     --i-taxonomy ./Qiime_new/taxonomy.qza \     --p-mode exact \     --p-exclude "D_0__Bacteria;D_1__Proteobacteria;D_2__Gammaproteobacteria;D_3__Vibrionales;D_4__Vibrionaceae;D_5__Vibrio;D_6__uncultured Shewanella sp." \     --o-filtered-table ./Qiime_new/table-filtered2.qza## Creating the new table.qza fileqiime feature-table summarize \  --i-table ./Qiime_new/table-filtered2.qza \  --o-visualization ./Qiime_new/table-filtered2.qzv \  --m-sample-metadata-file BRD.samplesQiime.txt## Filtering the representative sequences##You need to download first the taxonomy metadata because the ID it’s going to be use for the filtering step## The id for Pseudoalteromonasqiime taxa filter-seqs \  --i-sequences ./Qiime_new/rep-seqs.qza \  --i-taxonomy ./Qiime_new/taxonomy.qza \  --p-exclude "D_0__Bacteria;D_1__Proteobacteria;D_2__Gammaproteobacteria;D_3__Alteromonadales;D_4__Pseudoalteromonadaceae;D_5__Pseudoalteromonas" \  --o-filtered-sequences ./Qiime_new/rep-seqs-nopseudo.qzaqiime taxa filter-seqs \  --i-sequences ./Qiime_new/rep-seqs-nopseudo.qza \  --i-taxonomy ./Qiime_new/taxonomy.qza \  --p-exclude "D_0__Bacteria;D_1__Proteobacteria;D_2__Gammaproteobacteria;D_3__Vibrionales;D_4__Vibrionaceae;D_5__Vibrio" \  --o-filtered-sequences ./Qiime_new/rep-seqs-filtered.qzaqiime taxa filter-seqs \  --i-sequences ./Qiime_new/rep-seqs-filtered.qza \  --i-taxonomy ./Qiime_new/taxonomy.qza \  --p-exclude "D_0__Bacteria;D_1__Proteobacteria;D_2__Gammaproteobacteria;D_3__Vibrionales;D_4__Vibrionaceae;D_5__Vibrio;D_6__Vibrio sp. RCB484" \  --o-filtered-sequences ./Qiime_new/rep-seqs-filtered2.qzaqiime taxa filter-seqs \  --i-sequences ./Qiime_new/rep-seqs-filtered.qza \  --i-taxonomy ./Qiime_new/taxonomy.qza \  --p-exclude "D_0__Bacteria;D_1__Proteobacteria;D_2__Gammaproteobacteria;D_3__Vibrionales;D_4__Vibrionaceae;D_5__Vibrio;D_6__uncultured Shewanella sp." \  --o-filtered-sequences ./Qiime_new/rep-seqs-filtered2.qzaqiime taxa filter-seqs \  --i-sequences ./Qiime_new/rep-seqs-filtered2.qza \  --i-taxonomy ./Qiime_new/taxonomy.qza \  --p-exclude "D_0__Bacteria;D_1__Proteobacteria;D_2__Gammaproteobacteria;D_3__Vibrionales;D_4__Vibrionaceae;D_5__Vibrio;D_6__uncultured Shewanella sp." \  --o-filtered-sequences ./Qiime_new/rep-seqs-filtered2.qzaqiime feature-table tabulate-seqs \  --i-data ./Qiime_new/rep-seqs-filtered2.qza\  --o-visualization ./Qiime_new/rep-seqs-filtered2.qzvSamples 131Features: 18,010Sequences: 12,458,101qiime phylogeny align-to-tree-mafft-fasttree \  --i-sequences ./Qiime_new/rep-seqs-filtered2.qza \  --o-alignment ./Qiime_filtered/aligned-rep-seqs.qza \  --o-masked-alignment ./Qiime_filtered/masked-aligned-rep-seqs.qza \  --o-tree ./Qiime_filtered/unrooted-tree.qza \  --o-rooted-tree ./Qiime_filtered/rooted-tree.qzaTest the rarefaction number 36221qiime diversity alpha-rarefaction \  --i-table ./Qiime_new/table-filtered2.qza \  --i-phylogeny ./Qiime_filtered/rooted-tree.qza \  --p-max-depth 40164 \  --m-metadata-file BRD.samplesQiime.txt \  --o-visualization ./Qiime_filtered/alpha-rarefaction-40164.qzvRarefying at 40164Dairy7336221Dairy7031967Dairy7110446Dairy1058573Dairy914031Dairy212599Dairy692228### Rarefying at 1897qiime diversity core-metrics-phylogenetic \  --i-phylogeny ./Qiime_filtered/rooted-tree.qza \  --i-table ./Qiime_new/table-filtered2.qza \  --p-sampling-depth 40164 \  --m-metadata-file BRD.samplesQiime.txt  \  --output-dir ./Qiime_filtered/core-metrics-resultsYou are in core-metric-NoPseudo2 directoryqiime tools export --input-path ./rarefied_table.qza --output-path exported/qiime tools export --input-path ./faith_pd_vector.qza --output-path exported/mv exported/alpha-diversity.tsv exported/faith_pd.tsvqiime tools export --input-path ./shannon_vector.qza --output-path exported/mv exported/alpha-diversity.tsv exported/shannon.tsvls exportedbiom convert -i exported/feature-table.biom -o exported/rarified-table.tsv --to-tsvqiime tools export --input-path observed_otus_vector.qza --output-path exported/mv exported/alpha-diversity.tsv exported/observed_otus.tsvqiime tools export --input-path evenness_vector.qza --output-path exported/mv exported/alpha-diversity.tsv exported/evenness.tsvqiime tools export --input-path ./Qiime_filtered/taxonomy.qza --output-path ./Qiime_filtered/Export beta diversity, you have to move to the OnlySamples directoryqiime tools export \  --input-path ./Qiime_filtered/core-metrics-results/unweighted_unifrac_pcoa_results.qza \  --output-path ./Qiime_filtered/core-metrics-results/exported-unweighted_unifracmv ./Qiime_filtered/core-metrics-results/exported-unweighted_unifrac/ordination.txt ./Qiime_filtered/core-metrics-results/exported-unweighted_unifrac/ordination_unweighted.txtqiime tools export \  --input-path ./Qiime_filtered/core-metrics-results/bray_curtis_pcoa_results.qza \  --output-path ./Qiime_filtered/core-metrics-results/exported-bray_curtismv ./Qiime_filtered/core-metrics-results/exported-bray_curtis/ordination.txt ./Qiime_filtered/core-metrics-results/exported-bray_curtis/ordination_braycurtis.txtqiime tools export \  --input-path ./Qiime_filtered/core-metrics-results/weighted_unifrac_pcoa_results.qza \  --output-path ./Qiime_filtered/core-metrics-results/exported-weighted_unifracmv ./Qiime_filtered/core-metrics-results/exported-weighted_unifrac/ordination.txt ./Qiime_filtered/core-metrics-results/exported-weighted_unifrac/ordination_weighted.txtqiime tools export \  --input-path ./Qiime_filtered/core-metrics-results/weighted_unifrac_distance_matrix.qza \  --output-path ./Qiime_filtered/core-metrics-results/exported-weighted_distancemv ./Qiime_filtered/core-metrics-results/exported-weighted_distance/distance-matrix.tsv ./Qiime_filtered/core-metrics-results/exported-weighted_distance/weighted-distance-matrix.tsvqiime tools export \  --input-path ./Qiime_filtered/core-metrics-results/bray_curtis_distance_matrix.qza \  --output-path ./Qiime_filtered/core-metrics-results/exported-bray_curtis_distancemv ./Qiime_filtered/core-metrics-results/exported-bray_curtis_distance/distance-matrix.tsv ./Qiime_filtered/core-metrics-results/exported-bray_curtis_distance/bray_curtis-distance-matrix.tsvTaxonomic analysisqiime feature-classifier classify-sklearn \  --i-classifier silva-132-99-515-806-nb-classifier.qza \  --i-reads ./Qiime_new/rep-seqs-filtered2.qza \  --o-classification ./Qiime_filtered/taxonomy.qzaqiime metadata tabulate \  --m-input-file ./Qiime_filtered/taxonomy.qza \  --o-visualization ./Qiime_filtered/taxonomy.qzvqiime taxa barplot \  --i-table ./Qiime_new/table-filtered2.qza \  --i-taxonomy ./Qiime_filtered/taxonomy.qza \  --m-metadata-file BRD.samplesQiime.txt \  --o-visualization ./Qiime_filtered/taxa-bar-plots.qzv## Getting Chao1qiime diversity alpha \--i-table ./Qiime_filtered/core-metrics-results/rarefied_table.qza \--p-metric chao1 \--o-alpha-diversity ./Qiime_filtered/chao1.qzaqiime tools export --input-path ./chao1.qza --output-path ./core-metrics-results/exported/mv alpha-diversity.tsv chao1.tsv### Beta diversityqiime diversity beta-group-significance \  --i-distance-matrix ./Qiime_filtered/core-metrics-results/weighted_unifrac_distance_matrix.qza \  --m-metadata-file BRD.samplesQiime.txt \  --m-metadata-column BRD \  --o-visualization ./Qiime_filtered/core-metrics-results/unweighted-unifrac-BRD-significance.qzv qiime diversity beta-group-significance \  --i-distance-matrix ./Qiime_filtered/core-metrics-results/bray_curtis_distance_matrix.qza \  --m-metadata-file BRD.samplesQiime.txt \  --m-metadata-column BRD \  --o-visualization ./Qiime_filtered/core-metrics-results/bray-curtis-BRD-significance.qzv 